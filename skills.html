<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Developing modren web platforms using HTML, CSS & JS">
    <meta name="keywords" content="HTML, CSS, JavaScript, Metropolia, TechClass, project">
    <meta name="author" content="Rami Al-Karo">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Rami Al-Karo | Skills</title>
</head>

<body>
    <nav>
        <ul class="header">
            <li><a href="index.html">Home </a></li>
            <li><a href="skills.html">Skills </a></li>
            <li><a href="gallery.html">Gallery </a></li>
            <li><a href="projects.html">Projects </a></li>
            <li><a href="contact.html">Contact </a></li>
            <li><a href="education.html">Education history </a></li>
        </ul>
    </nav>

    <main class="container d-flex col m-4">
        <form class="container align-center " id="newSkillForm">
            <label for="newSkill" class="d-flex m-2">New Skill</label>
            <input type="text" name="skill" id="name" class="m-2" required>
            <input type="number" max="5" min="0" name="level" id="level" class="m-2" required>
            <button type="button" onclick="addSkill(event)">add</button>
        </form>
        <table>
            <thead>
                <tr>
                    <th>index</th>
                    <th>Technology</th>
                    <th>Level</th>
                </tr>
            </thead>
            <tbody id="tbody">

            </tbody>
        </table>
    </main>

    <script>
        let skills = [{
            id: 1,
            name: 'Git',
            level: 3
        }, {
            id: 2,
            name: 'HTML',
            level: 4
        }, {
            id: 3,
            name: 'JavaScript',
            level: 4
        }, {
            id: 5,
            name: 'ReactJs',
            level: 4
        }, {
            id: 6,
            name: 'Bootstrap',
            level: 4
        }, {
            id: 7,
            name: 'Tailwind',
            level: 4
        }, {
            id: 8,
            name: 'Java',
            level: 4
        }, {
            id: 9,
            name: 'Typescript',
            level: 3
        }, {
            id: 10,
            name: 'C++',
            level: 3
        }, {
            id: 11,
            name: 'Spring boot',
            level: 3
        }, ]

        function temp(tech) {
            return `<tr>
                    <td>${tech.id}</td>
                    <td>${tech.name} </td>
                        <td>
                            <p> ${tech.level}/5 </p>
                        </td>
                    </tr>`

        }
        skills.sort((a, b) => b.id - a.id).map(s => {
            document.getElementById("tbody").insertAdjacentHTML('afterbegin', temp(s))
        })

        const newSkillForm = document.getElementById("newSkillForm")

        const newSkill = new FormData(newSkillForm)


        function addSkill(event) {
            event.preventDefault()

            let obj = {
                id: new Date(Date.now()).valueOf(),
                name: '',
                level: 0
            }
            for (const [key, value] of newSkill) {
                key == 'level' ? obj.level = value : obj.name = value
            }
            // remove the last element or skill from the skills "array" 
            skills.splice(skills.length, 1)

            // add the new element to list 
            document.getElementById("tbody").insertAdjacentHTML('afterbegin', temp(obj))

            alert(`new skill added   ${JSON.stringify(obj)}`)
            clearForm()

        }

        function clearForm() {
            document.getElementById("name").value = ""
            document.getElementById("level").value = ""
        }
    </script>
</body>